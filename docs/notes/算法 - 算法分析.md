<!-- GFM-TOC -->
* [æ•°å­¦æ¨¡å‹](#æ•°å­¦æ¨¡å‹)
    * [1. è¿‘ä¼¼](#1-è¿‘ä¼¼)
    * [2. å¢é•¿æ•°é‡çº§](#2-å¢é•¿æ•°é‡çº§)
    * [3. å†…å¾ªç¯](#3-å†…å¾ªç¯)
    * [4. æˆæœ¬æ¨¡å‹](#4-æˆæœ¬æ¨¡å‹)
* [æ³¨æ„äº‹é¡¹](#æ³¨æ„äº‹é¡¹)
    * [1. å¤§å¸¸æ•°](#1-å¤§å¸¸æ•°)
    * [2. ç¼“å­˜](#2-ç¼“å­˜)
    * [3. å¯¹æœ€åæƒ…å†µä¸‹çš„æ€§èƒ½çš„ä¿è¯](#3-å¯¹æœ€åæƒ…å†µä¸‹çš„æ€§èƒ½çš„ä¿è¯)
    * [4. éšæœºåŒ–ç®—æ³•](#4-éšæœºåŒ–ç®—æ³•)
    * [5. å‡æ‘Šåˆ†æ](#5-å‡æ‘Šåˆ†æ)
* [ThreeSum](#threesum)
    * [1. ThreeSumSlow](#1-threesumslow)
    * [2. ThreeSumBinarySearch](#2-threesumbinarysearch)
    * [3. ThreeSumTwoPointer](#3-threesumtwopointer)
* [å€ç‡å®éªŒ](#å€ç‡å®éªŒ)
<!-- GFM-TOC -->


# æ•°å­¦æ¨¡å‹

##  1. è¿‘ä¼¼

N<sup>3</sup>/6-N<sup>2</sup>/2+N/3 \~ N<sup>3</sup>/6ã€‚ä½¿ç”¨ \~f(N) æ¥è¡¨ç¤ºæ‰€æœ‰éšç€ N çš„å¢å¤§é™¤ä»¥ f(N) çš„ç»“æœè¶‹è¿‘äº 1 çš„å‡½æ•°ã€‚

##  2. å¢é•¿æ•°é‡çº§

N<sup>3</sup>/6-N<sup>2</sup>/2+N/3 çš„å¢é•¿æ•°é‡çº§ä¸º O(N<sup>3</sup>)ã€‚å¢é•¿æ•°é‡çº§å°†ç®—æ³•ä¸å®ƒçš„å®ç°éš”ç¦»å¼€æ¥ï¼Œä¸€ä¸ªç®—æ³•çš„å¢é•¿æ•°é‡çº§ä¸º O(N<sup>3</sup>) ä¸å®ƒæ˜¯å¦ç”¨ Java å®ç°ï¼Œæ˜¯å¦è¿è¡Œäºç‰¹å®šè®¡ç®—æœºä¸Šæ— å…³ã€‚

##  3. å†…å¾ªç¯

æ‰§è¡Œæœ€é¢‘ç¹çš„æŒ‡ä»¤å†³å®šäº†ç¨‹åºæ‰§è¡Œçš„æ€»æ—¶é—´ï¼ŒæŠŠè¿™äº›æŒ‡ä»¤ç§°ä¸ºç¨‹åºçš„å†…å¾ªç¯ã€‚

##  4. æˆæœ¬æ¨¡å‹

ä½¿ç”¨æˆæœ¬æ¨¡å‹æ¥è¯„ä¼°ç®—æ³•ï¼Œä¾‹å¦‚æ•°ç»„çš„è®¿é—®æ¬¡æ•°å°±æ˜¯ä¸€ç§æˆæœ¬æ¨¡å‹ã€‚

# æ³¨æ„äº‹é¡¹

##  1. å¤§å¸¸æ•°

åœ¨æ±‚è¿‘ä¼¼æ—¶ï¼Œå¦‚æœä½çº§é¡¹çš„å¸¸æ•°ç³»æ•°å¾ˆå¤§ï¼Œé‚£ä¹ˆè¿‘ä¼¼çš„ç»“æœå°±æ˜¯é”™è¯¯çš„ã€‚

##  2. ç¼“å­˜

è®¡ç®—æœºç³»ç»Ÿä¼šä½¿ç”¨ç¼“å­˜æŠ€æœ¯æ¥ç»„ç»‡å†…å­˜ï¼Œè®¿é—®æ•°ç»„ç›¸é‚»çš„å…ƒç´ ä¼šæ¯”è®¿é—®ä¸ç›¸é‚»çš„å…ƒç´ å¿«å¾ˆå¤šã€‚

##  3. å¯¹æœ€åæƒ…å†µä¸‹çš„æ€§èƒ½çš„ä¿è¯

åœ¨æ ¸ååº”å †ã€å¿ƒè„èµ·æå™¨æˆ–è€…åˆ¹è½¦æ§åˆ¶å™¨ä¸­çš„è½¯ä»¶ï¼Œæœ€åæƒ…å†µä¸‹çš„æ€§èƒ½æ˜¯ååˆ†é‡è¦çš„ã€‚

##  4. éšæœºåŒ–ç®—æ³•

é€šè¿‡æ‰“ä¹±è¾“å…¥ï¼Œå»é™¤ç®—æ³•å¯¹è¾“å…¥çš„ä¾èµ–ã€‚

##  5. å‡æ‘Šåˆ†æ

å°†æ‰€æœ‰æ“ä½œçš„æ€»æˆæœ¬é™¤äºæ“ä½œæ€»æ•°æ¥å°†æˆæœ¬å‡æ‘Šã€‚ä¾‹å¦‚å¯¹ä¸€ä¸ªç©ºæ ˆè¿›è¡Œ N æ¬¡è¿ç»­çš„ push() è°ƒç”¨éœ€è¦è®¿é—®æ•°ç»„çš„æ¬¡æ•°ä¸º N+4+8+16+...+2N=5N-4ï¼ˆN æ˜¯å‘æ•°ç»„å†™å…¥å…ƒç´ çš„æ“ä½œæ¬¡æ•°ï¼Œå…¶ä½™çš„éƒ½æ˜¯è°ƒæ•´æ•°ç»„å¤§å°æ—¶è¿›è¡Œå¤åˆ¶éœ€è¦çš„è®¿é—®æ•°ç»„æ¬¡æ•°ï¼‰ï¼Œå‡æ‘Šåè®¿é—®æ•°ç»„çš„å¹³å‡æ¬¡æ•°ä¸ºå¸¸æ•°ã€‚

# ThreeSum

ThreeSum ç”¨äºç»Ÿè®¡ä¸€ä¸ªæ•°ç»„ä¸­å’Œä¸º 0 çš„ä¸‰å…ƒç»„æ•°é‡ã€‚

```java
public interface ThreeSum {
    int count(int[] nums);
}
```

##  1. ThreeSumSlow

è¯¥ç®—æ³•çš„å†…å¾ªç¯ä¸º `if (nums[i] + nums[j] + nums[k] == 0)` è¯­å¥ï¼Œæ€»å…±æ‰§è¡Œçš„æ¬¡æ•°ä¸º N(N-1)(N-2) = N<sup>3</sup>/6-N<sup>2</sup>/2+N/3ï¼Œå› æ­¤å®ƒçš„è¿‘ä¼¼æ‰§è¡Œæ¬¡æ•°ä¸º \~N<sup>3</sup>/6ï¼Œå¢é•¿æ•°é‡çº§ä¸º O(N<sup>3</sup>)ã€‚

```java
public class ThreeSumSlow implements ThreeSum {
    @Override
    public int count(int[] nums) {
        int N = nums.length;
        int cnt = 0;
        for (int i = 0; i < N; i++) {
            for (int j = i + 1; j < N; j++) {
                for (int k = j + 1; k < N; k++) {
                    if (nums[i] + nums[j] + nums[k] == 0) {
                        cnt++;
                    }
                }
            }
        }
        return cnt;
    }
}
```

##  2. ThreeSumBinarySearch

é€šè¿‡å°†æ•°ç»„å…ˆæ’åºï¼Œå¯¹ä¸¤ä¸ªå…ƒç´ æ±‚å’Œï¼Œå¹¶ç”¨äºŒåˆ†æŸ¥æ‰¾æ–¹æ³•æŸ¥æ‰¾æ˜¯å¦å­˜åœ¨è¯¥å’Œçš„ç›¸åæ•°ï¼Œå¦‚æœå­˜åœ¨ï¼Œå°±è¯´æ˜å­˜åœ¨ä¸‰å…ƒç»„çš„å’Œä¸º 0ã€‚

åº”è¯¥æ³¨æ„çš„æ˜¯ï¼Œåªæœ‰æ•°ç»„ä¸å«æœ‰ç›¸åŒå…ƒç´ æ‰èƒ½ä½¿ç”¨è¿™ç§è§£æ³•ï¼Œå¦åˆ™äºŒåˆ†æŸ¥æ‰¾çš„ç»“æœä¼šå‡ºé”™ã€‚

è¯¥æ–¹æ³•å¯ä»¥å°† ThreeSum ç®—æ³•å¢é•¿æ•°é‡çº§é™ä½ä¸º O(N<sup>2</sup>logN)ã€‚

```java
public class ThreeSumBinarySearch implements ThreeSum {

    @Override
    public int count(int[] nums) {
        Arrays.sort(nums);
        int N = nums.length;
        int cnt = 0;
        for (int i = 0; i < N; i++) {
            for (int j = i + 1; j < N; j++) {
                int target = -nums[i] - nums[j];
                int index = BinarySearch.search(nums, target);
                // åº”è¯¥æ³¨æ„è¿™é‡Œçš„ä¸‹æ ‡å¿…é¡»å¤§äº jï¼Œå¦åˆ™ä¼šé‡å¤ç»Ÿè®¡ã€‚
                if (index > j) {
                    cnt++;
                }
            }
        }
        return cnt;
    }
}
```

```java
public class BinarySearch {

    public static int search(int[] nums, int target) {
        int l = 0, h = nums.length - 1;
        while (l <= h) {
            int m = l + (h - l) / 2;
            if (target == nums[m]) {
                return m;
            } else if (target > nums[m]) {
                l = m + 1;
            } else {
                h = m - 1;
            }
        }
        return -1;
    }
}
```

##  3. ThreeSumTwoPointer

æ›´æœ‰æ•ˆçš„æ–¹æ³•æ˜¯å…ˆå°†æ•°ç»„æ’åºï¼Œç„¶åä½¿ç”¨åŒæŒ‡é’ˆè¿›è¡ŒæŸ¥æ‰¾ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(N<sup>2</sup>)ã€‚

```java
public class ThreeSumTwoPointer implements ThreeSum {

    @Override
    public int count(int[] nums) {
        int N = nums.length;
        int cnt = 0;
        Arrays.sort(nums);
        for (int i = 0; i < N - 2; i++) {
            int l = i + 1, h = N - 1, target = -nums[i];
            if (i > 0 && nums[i] == nums[i - 1]) continue;
            while (l < h) {
                int sum = nums[l] + nums[h];
                if (sum == target) {
                    cnt++;
                    while (l < h && nums[l] == nums[l + 1]) l++;
                    while (l < h && nums[h] == nums[h - 1]) h--;
                    l++;
                    h--;
                } else if (sum < target) {
                    l++;
                } else {
                    h--;
                }
            }
        }
        return cnt;
    }
}
```

# å€ç‡å®éªŒ

å¦‚æœ T(N) \~ aN<sup>b</sup>logNï¼Œé‚£ä¹ˆ T(2N)/T(N) \~ 2<sup>b</sup>ã€‚

ä¾‹å¦‚å¯¹äºæš´åŠ›çš„ ThreeSum ç®—æ³•ï¼Œè¿‘ä¼¼æ—¶é—´ä¸º \~N<sup>3</sup>/6ã€‚è¿›è¡Œå¦‚ä¸‹å®éªŒï¼šå¤šæ¬¡è¿è¡Œè¯¥ç®—æ³•ï¼Œæ¯æ¬¡å–çš„ N å€¼ä¸ºå‰ä¸€æ¬¡çš„ä¸¤å€ï¼Œç»Ÿè®¡æ¯æ¬¡æ‰§è¡Œçš„æ—¶é—´ï¼Œå¹¶ç»Ÿè®¡æœ¬æ¬¡è¿è¡Œæ—¶é—´ä¸å‰ä¸€æ¬¡è¿è¡Œæ—¶é—´çš„æ¯”å€¼ï¼Œå¾—åˆ°å¦‚ä¸‹ç»“æœï¼š

| N | Time(ms) | Ratio |
| :---: | :---: | :---: |
| 500 | 48 | / |
| 1000 | 320 | 6.7 |
| 2000 | 555 | 1.7 |
| 4000 | 4105 | 7.4 |
| 8000 | 33575 | 8.2 |
| 16000 | 268909 | 8.0 |

å¯ä»¥çœ‹åˆ°ï¼ŒT(2N)/T(N) \~ 2<sup>3</sup>ï¼Œå› æ­¤å¯ä»¥ç¡®å®š T(N) \~ aN<sup>3</sup>logNã€‚

```java
public class RatioTest {

    public static void main(String[] args) {
        int N = 500;
        int loopTimes = 7;
        double preTime = -1;
        while (loopTimes-- > 0) {
            int[] nums = new int[N];
            StopWatch.start();
            ThreeSum threeSum = new ThreeSumSlow();
            int cnt = threeSum.count(nums);
            System.out.println(cnt);
            double elapsedTime = StopWatch.elapsedTime();
            double ratio = preTime == -1 ? 0 : elapsedTime / preTime;
            System.out.println(N + "  " + elapsedTime + "  " + ratio);
            preTime = elapsedTime;
            N *= 2;
        }
    }
}
```

```java
public class StopWatch {

    private static long start;


    public static void start() {
        start = System.currentTimeMillis();
    }


    public static double elapsedTime() {
        long now = System.currentTimeMillis();
        return (now - start) / 1000.0;
    }
}
```




</br><div align="center">â­ï¸æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å· CyC2018ï¼Œåœ¨å…¬ä¼—å·åå°å›å¤å…³é”®å­— ğŸ“š **èµ„æ–™** å¯é¢†å–å¤ä¹ å¤§çº²ï¼Œè¿™ä»½å¤§çº²æ˜¯æˆ‘èŠ±äº†ä¸€æ•´å¹´æ—¶é—´æ•´ç†çš„é¢è¯•çŸ¥è¯†ç‚¹åˆ—è¡¨ï¼Œä¸ä»…ç³»ç»Ÿæ•´ç†äº†é¢è¯•çŸ¥è¯†ç‚¹ï¼Œè€Œä¸”æ ‡æ³¨äº†å„ä¸ªçŸ¥è¯†ç‚¹çš„é‡è¦ç¨‹åº¦ï¼Œä»è€Œå¸®ä½ ç†æ¸…å¤šè€Œæ‚çš„é¢è¯•çŸ¥è¯†ç‚¹ã€‚å¯ä»¥è¯´æˆ‘åŸºæœ¬æ˜¯æŒ‰ç…§è¿™ä»½å¤§çº²æ¥è¿›è¡Œå¤ä¹ çš„ï¼Œè¿™ä»½å¤§çº²å¯¹æˆ‘æ‹¿åˆ°äº† BAT å¤´æ¡ç­‰ Offer èµ·åˆ°å¾ˆå¤§çš„å¸®åŠ©ã€‚ä½ ä»¬å®Œå…¨å¯ä»¥å’Œæˆ‘ä¸€æ ·æ ¹æ®å¤§çº²ä¸Šåˆ—çš„çŸ¥è¯†ç‚¹æ¥è¿›è¡Œå¤ä¹ ï¼Œå°±ä¸ç”¨çœ‹å¾ˆå¤šä¸é‡è¦çš„å†…å®¹ï¼Œä¹Ÿå¯ä»¥çŸ¥é“å“ªäº›å†…å®¹å¾ˆé‡è¦ä»è€Œå¤šå®‰æ’ä¸€äº›å¤ä¹ æ—¶é—´ã€‚</div></br>
<div align="center"><img width="180px" src="https://cyc-1256109796.cos.ap-guangzhou.myqcloud.com/%E5%85%AC%E4%BC%97%E5%8F%B7.jpg"></img></div>
