<!-- GFM-TOC -->
* [å‰è¨€](#å‰è¨€)
* [åˆçº§å®ç°](#åˆçº§å®ç°)
    * [1. é“¾è¡¨å®ç°æ— åºç¬¦å·è¡¨](#1-é“¾è¡¨å®ç°æ— åºç¬¦å·è¡¨)
    * [2. äºŒåˆ†æŸ¥æ‰¾å®ç°æœ‰åºç¬¦å·è¡¨](#2-äºŒåˆ†æŸ¥æ‰¾å®ç°æœ‰åºç¬¦å·è¡¨)
* [äºŒå‰æŸ¥æ‰¾æ ‘](#äºŒå‰æŸ¥æ‰¾æ ‘)
    * [1. get()](#1-get)
    * [2. put()](#2-put)
    * [3. åˆ†æ](#3-åˆ†æ)
    * [4. floor()](#4-floor)
    * [5. rank()](#5-rank)
    * [6. min()](#6-min)
    * [7. deleteMin()](#7-deletemin)
    * [8. delete()](#8-delete)
    * [9. keys()](#9-keys)
    * [10. åˆ†æ](#10-åˆ†æ)
* [2-3 æŸ¥æ‰¾æ ‘](#2-3-æŸ¥æ‰¾æ ‘)
    * [1. æ’å…¥æ“ä½œ](#1-æ’å…¥æ“ä½œ)
    * [2. æ€§è´¨](#2-æ€§è´¨)
* [çº¢é»‘æ ‘](#çº¢é»‘æ ‘)
    * [1. å·¦æ—‹è½¬](#1-å·¦æ—‹è½¬)
    * [2. å³æ—‹è½¬](#2-å³æ—‹è½¬)
    * [3. é¢œè‰²è½¬æ¢](#3-é¢œè‰²è½¬æ¢)
    * [4. æ’å…¥](#4-æ’å…¥)
    * [5. åˆ†æ](#5-åˆ†æ)
* [æ•£åˆ—è¡¨](#æ•£åˆ—è¡¨)
    * [1. æ•£åˆ—å‡½æ•°](#1-æ•£åˆ—å‡½æ•°)
    * [2. æ‹‰é“¾æ³•](#2-æ‹‰é“¾æ³•)
    * [3. çº¿æ€§æ¢æµ‹æ³•](#3-çº¿æ€§æ¢æµ‹æ³•)
* [å°ç»“](#å°ç»“)
    * [1. ç¬¦å·è¡¨ç®—æ³•æ¯”è¾ƒ](#1-ç¬¦å·è¡¨ç®—æ³•æ¯”è¾ƒ)
    * [2. Java çš„ç¬¦å·è¡¨å®ç°](#2-java-çš„ç¬¦å·è¡¨å®ç°)
    * [3. ç¨€ç–å‘é‡ä¹˜æ³•](#3-ç¨€ç–å‘é‡ä¹˜æ³•)
<!-- GFM-TOC -->


# å‰è¨€

ç¬¦å·è¡¨ï¼ˆSymbol Tableï¼‰æ˜¯ä¸€ç§å­˜å‚¨é”®å€¼å¯¹çš„æ•°æ®ç»“æ„ï¼Œå¯ä»¥æ”¯æŒå¿«é€ŸæŸ¥æ‰¾æ“ä½œã€‚

ç¬¦å·è¡¨åˆ†ä¸ºæœ‰åºå’Œæ— åºä¸¤ç§ï¼Œæœ‰åºç¬¦å·è¡¨ä¸»è¦æŒ‡æ”¯æŒ min()ã€max() ç­‰æ ¹æ®é”®çš„å¤§å°å…³ç³»æ¥å®ç°çš„æ“ä½œã€‚

æœ‰åºç¬¦å·è¡¨çš„é”®éœ€è¦å®ç° Comparable æ¥å£ã€‚

```java
public interface UnorderedST<Key, Value> {

    int size();

    Value get(Key key);

    void put(Key key, Value value);

    void delete(Key key);
}
```

```java
public interface OrderedST<Key extends Comparable<Key>, Value> {

    int size();

    void put(Key key, Value value);

    Value get(Key key);

    Key min();

    Key max();

    int rank(Key key);

    List<Key> keys(Key l, Key h);
}
```

# åˆçº§å®ç°

## 1. é“¾è¡¨å®ç°æ— åºç¬¦å·è¡¨

```java
public class ListUnorderedST<Key, Value> implements UnorderedST<Key, Value> {

    private Node first;

    private class Node {
        Key key;
        Value value;
        Node next;

        Node(Key key, Value value, Node next) {
            this.key = key;
            this.value = value;
            this.next = next;
        }
    }

    @Override
    public int size() {
        int cnt = 0;
        Node cur = first;
        while (cur != null) {
            cnt++;
            cur = cur.next;
        }
        return cnt;
    }

    @Override
    public void put(Key key, Value value) {
        Node cur = first;
        // å¦‚æœåœ¨é“¾è¡¨ä¸­æ‰¾åˆ°èŠ‚ç‚¹çš„é”®ç­‰äº key å°±æ›´æ–°è¿™ä¸ªèŠ‚ç‚¹çš„å€¼ä¸º value
        while (cur != null) {
            if (cur.key.equals(key)) {
                cur.value = value;
                return;
            }
            cur = cur.next;
        }
        // å¦åˆ™ä½¿ç”¨å¤´æ’æ³•æ’å…¥ä¸€ä¸ªæ–°èŠ‚ç‚¹
        first = new Node(key, value, first);
    }

    @Override
    public void delete(Key key) {
        if (first == null)
            return;
        if (first.key.equals(key))
            first = first.next;
        Node pre = first, cur = first.next;
        while (cur != null) {
            if (cur.key.equals(key)) {
                pre.next = cur.next;
                return;
            }
            pre = pre.next;
            cur = cur.next;
        }
    }

    @Override
    public Value get(Key key) {
        Node cur = first;
        while (cur != null) {
            if (cur.key.equals(key))
                return cur.value;
            cur = cur.next;
        }
        return null;
    }
}
```

## 2. äºŒåˆ†æŸ¥æ‰¾å®ç°æœ‰åºç¬¦å·è¡¨

ä½¿ç”¨ä¸€å¯¹å¹³è¡Œæ•°ç»„ï¼Œä¸€ä¸ªå­˜å‚¨é”®ä¸€ä¸ªå­˜å‚¨å€¼ã€‚

äºŒåˆ†æŸ¥æ‰¾çš„ rank() æ–¹æ³•è‡³å…³é‡è¦ï¼Œå½“é”®åœ¨è¡¨ä¸­æ—¶ï¼Œå®ƒèƒ½å¤ŸçŸ¥é“è¯¥é”®çš„ä½ç½®ï¼›å½“é”®ä¸åœ¨è¡¨ä¸­æ—¶ï¼Œå®ƒä¹Ÿèƒ½çŸ¥é“åœ¨ä½•å¤„æ’å…¥æ–°é”®ã€‚

äºŒåˆ†æŸ¥æ‰¾æœ€å¤šéœ€è¦ logN+1 æ¬¡æ¯”è¾ƒï¼Œä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾å®ç°çš„ç¬¦å·è¡¨çš„æŸ¥æ‰¾æ“ä½œæ‰€éœ€è¦çš„æ—¶é—´æœ€å¤šæ˜¯å¯¹æ•°çº§åˆ«çš„ã€‚ä½†æ˜¯æ’å…¥æ“ä½œéœ€è¦ç§»åŠ¨æ•°ç»„å…ƒç´ ï¼Œæ˜¯çº¿æ€§çº§åˆ«çš„ã€‚

```java
public class BinarySearchOrderedST<Key extends Comparable<Key>, Value> implements OrderedST<Key, Value> {

    private Key[] keys;
    private Value[] values;
    private int N = 0;

    public BinarySearchOrderedST(int capacity) {
        keys = (Key[]) new Comparable[capacity];
        values = (Value[]) new Object[capacity];
    }

    @Override
    public int size() {
        return N;
    }

    @Override
    public int rank(Key key) {
        int l = 0, h = N - 1;
        while (l <= h) {
            int m = l + (h - l) / 2;
            int cmp = key.compareTo(keys[m]);
            if (cmp == 0)
                return m;
            else if (cmp < 0)
                h = m - 1;
            else
                l = m + 1;
        }
        return l;
    }

    @Override
    public List<Key> keys(Key l, Key h) {
        int index = rank(l);
        List<Key> list = new ArrayList<>();
        while (keys[index].compareTo(h) <= 0) {
            list.add(keys[index]);
            index++;
        }
        return list;
    }

    @Override
    public void put(Key key, Value value) {
        int index = rank(key);
        // å¦‚æœæ‰¾åˆ°å·²ç»å­˜åœ¨çš„èŠ‚ç‚¹é”®ä¸º keyï¼Œå°±æ›´æ–°è¿™ä¸ªèŠ‚ç‚¹çš„å€¼ä¸º value
        if (index < N && keys[index].compareTo(key) == 0) {
            values[index] = value;
            return;
        }
        // å¦åˆ™åœ¨æ•°ç»„ä¸­æ’å…¥æ–°çš„èŠ‚ç‚¹ï¼Œéœ€è¦å…ˆå°†æ’å…¥ä½ç½®ä¹‹åçš„å…ƒç´ éƒ½å‘åç§»åŠ¨ä¸€ä¸ªä½ç½®
        for (int j = N; j > index; j--) {
            keys[j] = keys[j - 1];
            values[j] = values[j - 1];
        }
        keys[index] = key;
        values[index] = value;
        N++;
    }

    @Override
    public Value get(Key key) {
        int index = rank(key);
        if (index < N && keys[index].compareTo(key) == 0)
            return values[index];
        return null;
    }

    @Override
    public Key min() {
        return keys[0];
    }

    @Override
    public Key max() {
        return keys[N - 1];
    }
}
```

# äºŒå‰æŸ¥æ‰¾æ ‘

**äºŒå‰æ ‘**  æ˜¯ä¸€ä¸ªç©ºé“¾æ¥ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ªæœ‰å·¦å³ä¸¤ä¸ªé“¾æ¥çš„èŠ‚ç‚¹ï¼Œæ¯ä¸ªé“¾æ¥éƒ½æŒ‡å‘ä¸€é¢—å­äºŒå‰æ ‘ã€‚

<div align="center"> <img src="https://gitee.com/CyC2018/CS-Notes/raw/master/docs/pics/f9f9f993-8ece-4da7-b848-af9b438fad76.png" width="200"/> </div><br>

**äºŒå‰æŸ¥æ‰¾æ ‘** ï¼ˆBSTï¼‰æ˜¯ä¸€é¢—äºŒå‰æ ‘ï¼Œå¹¶ä¸”æ¯ä¸ªèŠ‚ç‚¹çš„å€¼éƒ½å¤§äºç­‰äºå…¶å·¦å­æ ‘ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹çš„å€¼è€Œå°äºç­‰äºå³å­æ ‘çš„æ‰€æœ‰èŠ‚ç‚¹çš„å€¼ã€‚

<div align="center"> <img src="https://gitee.com/CyC2018/CS-Notes/raw/master/docs/pics/8ae4550b-f0cb-4e4d-9e2b-c550538bf230.png" width="200"/> </div><br>

BST æœ‰ä¸€ä¸ªé‡è¦æ€§è´¨ï¼Œå°±æ˜¯å®ƒçš„ä¸­åºéå†ç»“æœé€’å¢æ’åºã€‚

<div align="center"> <img src="https://gitee.com/CyC2018/CS-Notes/raw/master/docs/pics/fbe54203-c005-48f0-8883-b05e564a3173.png" width="200"/> </div><br>

åŸºæœ¬æ•°æ®ç»“æ„ï¼š

```java
public class BST<Key extends Comparable<Key>, Value> implements OrderedST<Key, Value> {

    protected Node root;

    protected class Node {
        Key key;
        Value val;
        Node left;
        Node right;
        // ä»¥è¯¥èŠ‚ç‚¹ä¸ºæ ¹çš„å­æ ‘èŠ‚ç‚¹æ€»æ•°
        int N;
        // çº¢é»‘æ ‘ä¸­ä½¿ç”¨
        boolean color;

        Node(Key key, Value val, int N) {
            this.key = key;
            this.val = val;
            this.N = N;
        }
    }

    @Override
    public int size() {
        return size(root);
    }

    private int size(Node x) {
        if (x == null)
            return 0;
        return x.N;
    }

    protected void recalculateSize(Node x) {
        x.N = size(x.left) + size(x.right) + 1;
    }
}
```

ä¸ºäº†æ–¹ä¾¿ç»˜å›¾ï¼Œä¸‹æ–‡ä¸­äºŒå‰æ ‘çš„ç©ºé“¾æ¥ä¸ç”»å‡ºæ¥ã€‚

## 1. get()

- å¦‚æœæ ‘æ˜¯ç©ºçš„ï¼Œåˆ™æŸ¥æ‰¾æœªå‘½ä¸­ï¼›
- å¦‚æœè¢«æŸ¥æ‰¾çš„é”®å’Œæ ¹èŠ‚ç‚¹çš„é”®ç›¸ç­‰ï¼ŒæŸ¥æ‰¾å‘½ä¸­ï¼›
- å¦åˆ™é€’å½’åœ°åœ¨å­æ ‘ä¸­æŸ¥æ‰¾ï¼šå¦‚æœè¢«æŸ¥æ‰¾çš„é”®è¾ƒå°å°±åœ¨å·¦å­æ ‘ä¸­æŸ¥æ‰¾ï¼Œè¾ƒå¤§å°±åœ¨å³å­æ ‘ä¸­æŸ¥æ‰¾ã€‚

```java
@Override
public Value get(Key key) {
    return get(root, key);
}

private Value get(Node x, Key key) {
    if (x == null)
        return null;
    int cmp = key.compareTo(x.key);
    if (cmp == 0)
        return x.val;
    else if (cmp < 0)
        return get(x.left, key);
    else
        return get(x.right, key);
}
```

## 2. put()

å½“æ’å…¥çš„é”®ä¸å­˜åœ¨äºæ ‘ä¸­ï¼Œéœ€è¦åˆ›å»ºä¸€ä¸ªæ–°èŠ‚ç‚¹ï¼Œå¹¶ä¸”æ›´æ–°ä¸Šå±‚èŠ‚ç‚¹çš„é“¾æ¥æŒ‡å‘è¯¥èŠ‚ç‚¹ï¼Œä½¿å¾—è¯¥èŠ‚ç‚¹æ­£ç¡®åœ°é“¾æ¥åˆ°æ ‘ä¸­ã€‚

<div align="center"> <img src="https://gitee.com/CyC2018/CS-Notes/raw/master/docs/pics/107a6a2b-f15b-4cad-bced-b7fb95258c9c.png" width="200"/> </div><br>

```java
 @Override
public void put(Key key, Value value) {
    root = put(root, key, value);
}

private Node put(Node x, Key key, Value value) {
    if (x == null)
        return new Node(key, value, 1);
    int cmp = key.compareTo(x.key);
    if (cmp == 0)
        x.val = value;
    else if (cmp < 0)
        x.left = put(x.left, key, value);
    else
        x.right = put(x.right, key, value);
    recalculateSize(x);
    return x;
}
```

## 3. åˆ†æ

äºŒå‰æŸ¥æ‰¾æ ‘çš„ç®—æ³•è¿è¡Œæ—¶é—´å–å†³äºæ ‘çš„å½¢çŠ¶ï¼Œè€Œæ ‘çš„å½¢çŠ¶åˆå–å†³äºé”®è¢«æ’å…¥çš„å…ˆåé¡ºåºã€‚

æœ€å¥½çš„æƒ…å†µä¸‹æ ‘æ˜¯å®Œå…¨å¹³è¡¡çš„ï¼Œæ¯æ¡ç©ºé“¾æ¥å’Œæ ¹èŠ‚ç‚¹çš„è·ç¦»éƒ½ä¸º logNã€‚

<div align="center"> <img src="https://gitee.com/CyC2018/CS-Notes/raw/master/docs/pics/4d741402-344d-4b7c-be01-e57184bcad0e.png" width="200"/> </div><br>

åœ¨æœ€åçš„æƒ…å†µä¸‹ï¼Œæ ‘çš„é«˜åº¦ä¸º Nã€‚

<div align="center"> <img src="https://gitee.com/CyC2018/CS-Notes/raw/master/docs/pics/be7dca03-12ec-456b-8b54-b1b3161f5531.png" width="200"/> </div><br>

## 4. floor()

floor(key)ï¼šå°äºç­‰äºé”®çš„æœ€å¤§é”®

- å¦‚æœé”®å°äºæ ¹èŠ‚ç‚¹çš„é”®ï¼Œé‚£ä¹ˆ floor(key) ä¸€å®šåœ¨å·¦å­æ ‘ä¸­ï¼›
- å¦‚æœé”®å¤§äºæ ¹èŠ‚ç‚¹çš„é”®ï¼Œéœ€è¦å…ˆåˆ¤æ–­å³å­æ ‘ä¸­æ˜¯å¦å­˜åœ¨ floor(key)ï¼Œå¦‚æœå­˜åœ¨å°±è¿”å›ï¼Œå¦åˆ™æ ¹èŠ‚ç‚¹å°±æ˜¯ floor(key)ã€‚

```java
public Key floor(Key key) {
    Node x = floor(root, key);
    if (x == null)
        return null;
    return x.key;
}

private Node floor(Node x, Key key) {
    if (x == null)
        return null;
    int cmp = key.compareTo(x.key);
    if (cmp == 0)
        return x;
    if (cmp < 0)
        return floor(x.left, key);
    Node t = floor(x.right, key);
    return t != null ? t : x;
}
```

## 5. rank()

rank(key) è¿”å› key çš„æ’åã€‚

- å¦‚æœé”®å’Œæ ¹èŠ‚ç‚¹çš„é”®ç›¸ç­‰ï¼Œè¿”å›å·¦å­æ ‘çš„èŠ‚ç‚¹æ•°ï¼›
- å¦‚æœå°äºï¼Œé€’å½’è®¡ç®—åœ¨å·¦å­æ ‘ä¸­çš„æ’åï¼›
- å¦‚æœå¤§äºï¼Œé€’å½’è®¡ç®—åœ¨å³å­æ ‘ä¸­çš„æ’åï¼ŒåŠ ä¸Šå·¦å­æ ‘çš„èŠ‚ç‚¹æ•°ï¼Œå†åŠ ä¸Š 1ï¼ˆæ ¹èŠ‚ç‚¹ï¼‰ã€‚

```java
@Override
public int rank(Key key) {
    return rank(key, root);
}

private int rank(Key key, Node x) {
    if (x == null)
        return 0;
    int cmp = key.compareTo(x.key);
    if (cmp == 0)
        return size(x.left);
    else if (cmp < 0)
        return rank(key, x.left);
    else
        return 1 + size(x.left) + rank(key, x.right);
}
```

## 6. min()

```java
@Override
public Key min() {
    return min(root).key;
}

private Node min(Node x) {
    if (x == null)
        return null;
    if (x.left == null)
        return x;
    return min(x.left);
}
```

## 7. deleteMin()

ä»¤æŒ‡å‘æœ€å°èŠ‚ç‚¹çš„é“¾æ¥æŒ‡å‘æœ€å°èŠ‚ç‚¹çš„å³å­æ ‘ã€‚

<div align="center"> <img src="https://gitee.com/CyC2018/CS-Notes/raw/master/docs/pics/dd15a984-e977-4644-b127-708cddb8ca99.png" width="500"/> </div><br>

```java
public void deleteMin() {
    root = deleteMin(root);
}

public Node deleteMin(Node x) {
    if (x.left == null)
        return x.right;
    x.left = deleteMin(x.left);
    recalculateSize(x);
    return x;
}
```

## 8. delete()

- å¦‚æœå¾…åˆ é™¤çš„èŠ‚ç‚¹åªæœ‰ä¸€ä¸ªå­æ ‘ï¼Œ  é‚£ä¹ˆåªéœ€è¦è®©æŒ‡å‘å¾…åˆ é™¤èŠ‚ç‚¹çš„é“¾æ¥æŒ‡å‘å”¯ä¸€çš„å­æ ‘å³å¯ï¼›
- å¦åˆ™ï¼Œè®©å³å­æ ‘çš„æœ€å°èŠ‚ç‚¹æ›¿æ¢è¯¥èŠ‚ç‚¹ã€‚

<div align="center"> <img src="https://gitee.com/CyC2018/CS-Notes/raw/master/docs/pics/fa568fac-ac58-48dd-a9bb-23b3065bf2dc.png" width="400"/> </div><br>

```java
public void delete(Key key) {
    root = delete(root, key);
}
private Node delete(Node x, Key key) {
    if (x == null)
        return null;
    int cmp = key.compareTo(x.key);
    if (cmp < 0)
        x.left = delete(x.left, key);
    else if (cmp > 0)
        x.right = delete(x.right, key);
    else {
        if (x.right == null)
            return x.left;
        if (x.left == null)
            return x.right;
        Node t = x;
        x = min(t.right);
        x.right = deleteMin(t.right);
        x.left = t.left;
    }
    recalculateSize(x);
    return x;
}
```

## 9. keys()

åˆ©ç”¨äºŒå‰æŸ¥æ‰¾æ ‘ä¸­åºéå†çš„ç»“æœä¸ºé€’å¢çš„ç‰¹ç‚¹ã€‚

```java
@Override
public List<Key> keys(Key l, Key h) {
    return keys(root, l, h);
}

private List<Key> keys(Node x, Key l, Key h) {
    List<Key> list = new ArrayList<>();
    if (x == null)
        return list;
    int cmpL = l.compareTo(x.key);
    int cmpH = h.compareTo(x.key);
    if (cmpL < 0)
        list.addAll(keys(x.left, l, h));
    if (cmpL <= 0 && cmpH >= 0)
        list.add(x.key);
    if (cmpH > 0)
        list.addAll(keys(x.right, l, h));
    return list;
}
```

## 10. åˆ†æ

äºŒå‰æŸ¥æ‰¾æ ‘æ‰€æœ‰æ“ä½œåœ¨æœ€åçš„æƒ…å†µä¸‹æ‰€éœ€è¦çš„æ—¶é—´éƒ½å’Œæ ‘çš„é«˜åº¦æˆæ­£æ¯”ã€‚

# 2-3 æŸ¥æ‰¾æ ‘

2-3 æŸ¥æ‰¾æ ‘å¼•å…¥äº† 2- èŠ‚ç‚¹å’Œ 3- èŠ‚ç‚¹ï¼Œç›®çš„æ˜¯ä¸ºäº†è®©æ ‘å¹³è¡¡ã€‚ä¸€é¢—å®Œç¾å¹³è¡¡çš„ 2-3 æŸ¥æ‰¾æ ‘çš„æ‰€æœ‰ç©ºé“¾æ¥åˆ°æ ¹èŠ‚ç‚¹çš„è·ç¦»åº”è¯¥æ˜¯ç›¸åŒçš„ã€‚

<div align="center"> <img src="https://gitee.com/CyC2018/CS-Notes/raw/master/docs/pics/ff396233-1bb1-4e74-8bc2-d7c90146f5dd.png" width="250"/> </div><br>

## 1. æ’å…¥æ“ä½œ

æ’å…¥æ“ä½œå’Œ BST çš„æ’å…¥æ“ä½œæœ‰å¾ˆå¤§åŒºåˆ«ï¼ŒBST çš„æ’å…¥æ“ä½œæ˜¯å…ˆè¿›è¡Œä¸€æ¬¡æœªå‘½ä¸­çš„æŸ¥æ‰¾ï¼Œç„¶åå†å°†èŠ‚ç‚¹æ’å…¥åˆ°å¯¹åº”çš„ç©ºé“¾æ¥ä¸Šã€‚ä½†æ˜¯ 2-3 æŸ¥æ‰¾æ ‘å¦‚æœä¹Ÿè¿™ä¹ˆåšçš„è¯ï¼Œé‚£ä¹ˆå°±ä¼šç ´åäº†å¹³è¡¡æ€§ã€‚å®ƒæ˜¯å°†æ–°èŠ‚ç‚¹æ’å…¥åˆ°å¶å­èŠ‚ç‚¹ä¸Šã€‚

æ ¹æ®å¶å­èŠ‚ç‚¹çš„ç±»å‹ä¸åŒï¼Œæœ‰ä¸åŒçš„å¤„ç†æ–¹å¼ï¼š

- å¦‚æœæ’å…¥åˆ° 2- èŠ‚ç‚¹ä¸Šï¼Œé‚£ä¹ˆç›´æ¥å°†æ–°èŠ‚ç‚¹å’ŒåŸæ¥çš„èŠ‚ç‚¹ç»„æˆ 3- èŠ‚ç‚¹å³å¯ã€‚

<div align="center"> <img src="https://gitee.com/CyC2018/CS-Notes/raw/master/docs/pics/7f38a583-2f2e-4738-97af-510e6fb403a7.png" width="400"/> </div><br>

- å¦‚æœæ˜¯æ’å…¥åˆ° 3- èŠ‚ç‚¹ä¸Šï¼Œå°±ä¼šäº§ç”Ÿä¸€ä¸ªä¸´æ—¶ 4- èŠ‚ç‚¹æ—¶ï¼Œéœ€è¦å°† 4- èŠ‚ç‚¹åˆ†è£‚æˆ 3 ä¸ª 2- èŠ‚ç‚¹ï¼Œå¹¶å°†ä¸­é—´çš„ 2- èŠ‚ç‚¹ç§»åˆ°ä¸Šå±‚èŠ‚ç‚¹ä¸­ã€‚å¦‚æœä¸Šç§»æ“ä½œç»§ç»­äº§ç”Ÿä¸´æ—¶ 4- èŠ‚ç‚¹åˆ™ä¸€ç›´è¿›è¡Œåˆ†è£‚ä¸Šç§»ï¼Œç›´åˆ°ä¸å­˜åœ¨ä¸´æ—¶ 4- èŠ‚ç‚¹ã€‚

<div align="center"> <img src="https://gitee.com/CyC2018/CS-Notes/raw/master/docs/pics/ef280699-da36-4b38-9735-9b048a3c7fe0.png" width="500"/> </div><br>

## 2. æ€§è´¨

2-3 æŸ¥æ‰¾æ ‘æ’å…¥æ“ä½œçš„å˜æ¢éƒ½æ˜¯å±€éƒ¨çš„ï¼Œé™¤äº†ç›¸å…³çš„èŠ‚ç‚¹å’Œé“¾æ¥ä¹‹å¤–ä¸å¿…ä¿®æ”¹æˆ–è€…æ£€æŸ¥æ ‘çš„å…¶å®ƒéƒ¨åˆ†ï¼Œè€Œè¿™äº›å±€éƒ¨å˜æ¢ä¸ä¼šå½±å“æ ‘çš„å…¨å±€æœ‰åºæ€§å’Œå¹³è¡¡æ€§ã€‚

2-3 æŸ¥æ‰¾æ ‘çš„æŸ¥æ‰¾å’Œæ’å…¥æ“ä½œå¤æ‚åº¦å’Œæ’å…¥é¡ºåºæ— å…³ï¼Œåœ¨æœ€åçš„æƒ…å†µä¸‹æŸ¥æ‰¾å’Œæ’å…¥æ“ä½œè®¿é—®çš„èŠ‚ç‚¹å¿…ç„¶ä¸è¶…è¿‡ logN ä¸ªï¼Œå«æœ‰ 10 äº¿ä¸ªèŠ‚ç‚¹çš„ 2-3 æŸ¥æ‰¾æ ‘æœ€å¤šåªéœ€è¦è®¿é—® 30 ä¸ªèŠ‚ç‚¹å°±èƒ½è¿›è¡Œä»»æ„çš„æŸ¥æ‰¾å’Œæ’å…¥æ“ä½œã€‚

# çº¢é»‘æ ‘

çº¢é»‘æ ‘æ˜¯ 2-3 æŸ¥æ‰¾æ ‘ï¼Œä½†å®ƒä¸éœ€è¦åˆ†åˆ«å®šä¹‰ 2- èŠ‚ç‚¹å’Œ 3- èŠ‚ç‚¹ï¼Œè€Œæ˜¯åœ¨æ™®é€šçš„äºŒå‰æŸ¥æ‰¾æ ‘ä¹‹ä¸Šï¼Œä¸ºèŠ‚ç‚¹æ·»åŠ é¢œè‰²ã€‚æŒ‡å‘ä¸€ä¸ªèŠ‚ç‚¹çš„é“¾æ¥é¢œè‰²å¦‚æœä¸ºçº¢è‰²ï¼Œé‚£ä¹ˆè¿™ä¸ªèŠ‚ç‚¹å’Œä¸Šå±‚èŠ‚ç‚¹è¡¨ç¤ºçš„æ˜¯ä¸€ä¸ª 3- èŠ‚ç‚¹ï¼Œè€Œé»‘è‰²åˆ™æ˜¯æ™®é€šé“¾æ¥ã€‚

<div align="center"> <img src="https://gitee.com/CyC2018/CS-Notes/raw/master/docs/pics/4f48e806-f90b-4c09-a55f-ac0cd641c047.png" width="250"/> </div><br>

çº¢é»‘æ ‘å…·æœ‰ä»¥ä¸‹æ€§è´¨ï¼š

- çº¢é“¾æ¥éƒ½ä¸ºå·¦é“¾æ¥ï¼›
- å®Œç¾é»‘è‰²å¹³è¡¡ï¼Œå³ä»»æ„ç©ºé“¾æ¥åˆ°æ ¹èŠ‚ç‚¹çš„è·¯å¾„ä¸Šçš„é»‘é“¾æ¥æ•°é‡ç›¸åŒã€‚

ç”»çº¢é»‘æ ‘æ—¶å¯ä»¥å°†çº¢é“¾æ¥ç”»å¹³ã€‚

<div align="center"> <img src="https://gitee.com/CyC2018/CS-Notes/raw/master/docs/pics/3086c248-b552-499e-b101-9cffe5c2773e.png" width="300"/> </div><br>

```java
public class RedBlackBST<Key extends Comparable<Key>, Value> extends BST<Key, Value> {

    private static final boolean RED = true;
    private static final boolean BLACK = false;

    private boolean isRed(Node x) {
        if (x == null)
            return false;
        return x.color == RED;
    }
}
```

## 1. å·¦æ—‹è½¬

å› ä¸ºåˆæ³•çš„çº¢é“¾æ¥éƒ½ä¸ºå·¦é“¾æ¥ï¼Œå¦‚æœå‡ºç°å³é“¾æ¥ä¸ºçº¢é“¾æ¥ï¼Œé‚£ä¹ˆå°±éœ€è¦è¿›è¡Œå·¦æ—‹è½¬æ“ä½œã€‚

<div align="center"> <img src="https://gitee.com/CyC2018/CS-Notes/raw/master/docs/pics/9110c1a0-8a54-4145-a814-2477d0128114.png" width="450"/> </div><br>

```java
public Node rotateLeft(Node h) {
    Node x = h.right;
    h.right = x.left;
    x.left = h;
    x.color = h.color;
    h.color = RED;
    x.N = h.N;
    recalculateSize(h);
    return x;
}
```

## 2. å³æ—‹è½¬

è¿›è¡Œå³æ—‹è½¬æ˜¯ä¸ºäº†è½¬æ¢ä¸¤ä¸ªè¿ç»­çš„å·¦çº¢é“¾æ¥ï¼Œè¿™ä¼šåœ¨ä¹‹åçš„æ’å…¥è¿‡ç¨‹ä¸­æ¢è®¨ã€‚

<div align="center"> <img src="https://gitee.com/CyC2018/CS-Notes/raw/master/docs/pics/e2f0d889-2330-424c-8193-198edebecff7.png" width="450"/> </div><br>

```java
public Node rotateRight(Node h) {
    Node x = h.left;
    h.left = x.right;
    x.right = h;
    x.color = h.color;
    h.color = RED;
    x.N = h.N;
    recalculateSize(h);
    return x;
}
```

## 3. é¢œè‰²è½¬æ¢

ä¸€ä¸ª 4- èŠ‚ç‚¹åœ¨çº¢é»‘æ ‘ä¸­è¡¨ç°ä¸ºä¸€ä¸ªèŠ‚ç‚¹çš„å·¦å³å­èŠ‚ç‚¹éƒ½æ˜¯çº¢è‰²çš„ã€‚åˆ†è£‚ 4- èŠ‚ç‚¹é™¤äº†éœ€è¦å°†å­èŠ‚ç‚¹çš„é¢œè‰²ç”±çº¢å˜é»‘ä¹‹å¤–ï¼ŒåŒæ—¶éœ€è¦å°†çˆ¶èŠ‚ç‚¹çš„é¢œè‰²ç”±é»‘å˜çº¢ï¼Œä» 2-3 æ ‘çš„è§’åº¦çœ‹å°±æ˜¯å°†ä¸­é—´èŠ‚ç‚¹ç§»åˆ°ä¸Šå±‚èŠ‚ç‚¹ã€‚

<div align="center"> <img src="https://gitee.com/CyC2018/CS-Notes/raw/master/docs/pics/af4639f9-af54-4400-aaf5-4e261d96ace7.png" width="300"/> </div><br>

```java
void flipColors(Node h) {
    h.color = RED;
    h.left.color = BLACK;
    h.right.color = BLACK;
}
```

## 4. æ’å…¥

å…ˆå°†ä¸€ä¸ªèŠ‚ç‚¹æŒ‰äºŒå‰æŸ¥æ‰¾æ ‘çš„æ–¹æ³•æ’å…¥åˆ°æ­£ç¡®ä½ç½®ï¼Œç„¶åå†è¿›è¡Œå¦‚ä¸‹é¢œè‰²æ“ä½œï¼š

- å¦‚æœå³å­èŠ‚ç‚¹æ˜¯çº¢è‰²çš„è€Œå·¦å­èŠ‚ç‚¹æ˜¯é»‘è‰²çš„ï¼Œè¿›è¡Œå·¦æ—‹è½¬ï¼›
- å¦‚æœå·¦å­èŠ‚ç‚¹æ˜¯çº¢è‰²çš„ï¼Œè€Œä¸”å·¦å­èŠ‚ç‚¹çš„å·¦å­èŠ‚ç‚¹ä¹Ÿæ˜¯çº¢è‰²çš„ï¼Œè¿›è¡Œå³æ—‹è½¬ï¼›
- å¦‚æœå·¦å³å­èŠ‚ç‚¹å‡ä¸ºçº¢è‰²çš„ï¼Œè¿›è¡Œé¢œè‰²è½¬æ¢ã€‚

<div align="center"> <img src="https://gitee.com/CyC2018/CS-Notes/raw/master/docs/pics/08427d38-8df1-49a1-8990-e0ce5ee36ca2.png" width="400"/> </div><br>

```java
@Override
public void put(Key key, Value value) {
    root = put(root, key, value);
    root.color = BLACK;
}

private Node put(Node x, Key key, Value value) {
    if (x == null) {
        Node node = new Node(key, value, 1);
        node.color = RED;
        return node;
    }
    int cmp = key.compareTo(x.key);
    if (cmp == 0)
        x.val = value;
    else if (cmp < 0)
        x.left = put(x.left, key, value);
    else
        x.right = put(x.right, key, value);

    if (isRed(x.right) && !isRed(x.left))
        x = rotateLeft(x);
    if (isRed(x.left) && isRed(x.left.left))
        x = rotateRight(x);
    if (isRed(x.left) && isRed(x.right))
        flipColors(x);

    recalculateSize(x);
    return x;
}
```

å¯ä»¥çœ‹åˆ°è¯¥æ’å…¥æ“ä½œå’ŒäºŒå‰æŸ¥æ‰¾æ ‘çš„æ’å…¥æ“ä½œç±»ä¼¼ï¼Œåªæ˜¯åœ¨æœ€ååŠ å…¥äº†æ—‹è½¬å’Œé¢œè‰²å˜æ¢æ“ä½œå³å¯ã€‚

æ ¹èŠ‚ç‚¹ä¸€å®šä¸ºé»‘è‰²ï¼Œå› ä¸ºæ ¹èŠ‚ç‚¹æ²¡æœ‰ä¸Šå±‚èŠ‚ç‚¹ï¼Œä¹Ÿå°±æ²¡æœ‰ä¸Šå±‚èŠ‚ç‚¹çš„å·¦é“¾æ¥æŒ‡å‘æ ¹èŠ‚ç‚¹ã€‚flipColors() æœ‰å¯èƒ½ä¼šä½¿å¾—æ ¹èŠ‚ç‚¹çš„é¢œè‰²å˜ä¸ºçº¢è‰²ï¼Œæ¯å½“æ ¹èŠ‚ç‚¹ç”±çº¢è‰²å˜æˆé»‘è‰²æ—¶æ ‘çš„é»‘é“¾æ¥é«˜åº¦åŠ  1.

## 5. åˆ†æ

ä¸€é¢—å¤§å°ä¸º N çš„çº¢é»‘æ ‘çš„é«˜åº¦ä¸ä¼šè¶…è¿‡ 2logNã€‚æœ€åçš„æƒ…å†µä¸‹æ˜¯å®ƒæ‰€å¯¹åº”çš„ 2-3 æ ‘ï¼Œæ„æˆæœ€å·¦è¾¹çš„è·¯å¾„èŠ‚ç‚¹å…¨éƒ¨éƒ½æ˜¯ 3- èŠ‚ç‚¹è€Œå…¶ä½™éƒ½æ˜¯ 2- èŠ‚ç‚¹ã€‚

çº¢é»‘æ ‘å¤§å¤šæ•°çš„æ“ä½œæ‰€éœ€è¦çš„æ—¶é—´éƒ½æ˜¯å¯¹æ•°çº§åˆ«çš„ã€‚

# æ•£åˆ—è¡¨

æ•£åˆ—è¡¨ç±»ä¼¼äºæ•°ç»„ï¼Œå¯ä»¥æŠŠæ•£åˆ—è¡¨çš„æ•£åˆ—å€¼çœ‹æˆæ•°ç»„çš„ç´¢å¼•å€¼ã€‚è®¿é—®æ•£åˆ—è¡¨å’Œè®¿é—®æ•°ç»„å…ƒç´ ä¸€æ ·å¿«é€Ÿï¼Œå®ƒå¯ä»¥åœ¨å¸¸æ•°æ—¶é—´å†…å®ç°æŸ¥æ‰¾å’Œæ’å…¥æ“ä½œã€‚

ç”±äºæ— æ³•é€šè¿‡æ•£åˆ—å€¼çŸ¥é“é”®çš„å¤§å°å…³ç³»ï¼Œå› æ­¤æ•£åˆ—è¡¨æ— æ³•å®ç°æœ‰åºæ€§æ“ä½œã€‚

## 1. æ•£åˆ—å‡½æ•°

å¯¹äºä¸€ä¸ªå¤§å°ä¸º M çš„æ•£åˆ—è¡¨ï¼Œæ•£åˆ—å‡½æ•°èƒ½å¤ŸæŠŠä»»æ„é”®è½¬æ¢ä¸º [0, M-1] å†…çš„æ­£æ•´æ•°ï¼Œè¯¥æ­£æ•´æ•°å³ä¸º hash å€¼ã€‚

æ•£åˆ—è¡¨å­˜åœ¨å†²çªï¼Œä¹Ÿå°±æ˜¯ä¸¤ä¸ªä¸åŒçš„é”®å¯èƒ½æœ‰ç›¸åŒçš„ hash å€¼ã€‚

æ•£åˆ—å‡½æ•°åº”è¯¥æ»¡è¶³ä»¥ä¸‹ä¸‰ä¸ªæ¡ä»¶ï¼š

- ä¸€è‡´æ€§ï¼šç›¸ç­‰çš„é”®åº”å½“æœ‰ç›¸ç­‰çš„ hash å€¼ï¼Œä¸¤ä¸ªé”®ç›¸ç­‰è¡¨ç¤ºè°ƒç”¨ equals() è¿”å›çš„å€¼ç›¸ç­‰ã€‚
- é«˜æ•ˆæ€§ï¼šè®¡ç®—åº”å½“ç®€ä¾¿ï¼Œæœ‰å¿…è¦çš„è¯å¯ä»¥æŠŠ hash å€¼ç¼“å­˜èµ·æ¥ï¼Œåœ¨è°ƒç”¨ hash å‡½æ•°æ—¶ç›´æ¥è¿”å›ã€‚
- å‡åŒ€æ€§ï¼šæ‰€æœ‰é”®çš„ hash å€¼åº”å½“å‡åŒ€åœ°åˆ†å¸ƒåˆ° [0, M-1] ä¹‹é—´ï¼Œå¦‚æœä¸èƒ½æ»¡è¶³è¿™ä¸ªæ¡ä»¶ï¼Œæœ‰å¯èƒ½äº§ç”Ÿå¾ˆå¤šå†²çªï¼Œä»è€Œå¯¼è‡´æ•£åˆ—è¡¨çš„æ€§èƒ½ä¸‹é™ã€‚

é™¤ç•™ä½™æ•°æ³•å¯ä»¥å°†æ•´æ•°æ•£åˆ—åˆ° [0, M-1] ä¹‹é—´ï¼Œä¾‹å¦‚ä¸€ä¸ªæ­£æ•´æ•° kï¼Œè®¡ç®— k%M æ—¢å¯å¾—åˆ°ä¸€ä¸ª [0, M-1] ä¹‹é—´çš„ hash å€¼ã€‚æ³¨æ„ M æœ€å¥½æ˜¯ä¸€ä¸ªç´ æ•°ï¼Œå¦åˆ™æ— æ³•åˆ©ç”¨é”®åŒ…å«çš„æ‰€æœ‰ä¿¡æ¯ã€‚ä¾‹å¦‚ M ä¸º 10<sup>k</sup>ï¼Œé‚£ä¹ˆåªèƒ½åˆ©ç”¨é”®çš„å k ä½ã€‚

å¯¹äºå…¶å®ƒæ•°ï¼Œå¯ä»¥å°†å…¶è½¬æ¢æˆæ•´æ•°çš„å½¢å¼ï¼Œç„¶ååˆ©ç”¨é™¤ç•™ä½™æ•°æ³•ã€‚ä¾‹å¦‚å¯¹äºæµ®ç‚¹æ•°ï¼Œå¯ä»¥å°†å…¶çš„äºŒè¿›åˆ¶å½¢å¼è½¬æ¢æˆæ•´æ•°ã€‚

å¯¹äºå¤šéƒ¨åˆ†ç»„åˆçš„ç±»å‹ï¼Œæ¯ä¸ªéƒ¨åˆ†éƒ½éœ€è¦è®¡ç®— hash å€¼ï¼Œè¿™äº› hash å€¼éƒ½å…·æœ‰åŒç­‰é‡è¦çš„åœ°ä½ã€‚ä¸ºäº†è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼Œå¯ä»¥å°†è¯¥ç±»å‹çœ‹æˆ R è¿›åˆ¶çš„æ•´æ•°ï¼Œæ¯ä¸ªéƒ¨åˆ†éƒ½å…·æœ‰ä¸åŒçš„æƒå€¼ã€‚

ä¾‹å¦‚ï¼Œå­—ç¬¦ä¸²çš„æ•£åˆ—å‡½æ•°å®ç°å¦‚ä¸‹ï¼š

```java
int hash = 0;
for (int i = 0; i < s.length(); i++)
    hash = (R * hash + s.charAt(i)) % M;
```

å†æ¯”å¦‚ï¼Œæ‹¥æœ‰å¤šä¸ªæˆå‘˜çš„è‡ªå®šä¹‰ç±»çš„å“ˆå¸Œå‡½æ•°å¦‚ä¸‹ï¼š

```java
int hash = (((day * R + month) % M) * R + year) % M;
```

R é€šå¸¸å– 31ã€‚

Java ä¸­çš„ hashCode() å®ç°äº†å“ˆå¸Œå‡½æ•°ï¼Œä½†æ˜¯é»˜è®¤ä½¿ç”¨å¯¹è±¡çš„å†…å­˜åœ°å€å€¼ã€‚åœ¨ä½¿ç”¨ hashCode() æ—¶ï¼Œåº”å½“ç»“åˆé™¤ç•™ä½™æ•°æ³•æ¥ä½¿ç”¨ã€‚å› ä¸ºå†…å­˜åœ°å€æ˜¯ 32 ä½æ•´æ•°ï¼Œæˆ‘ä»¬åªéœ€è¦ 31 ä½çš„éè´Ÿæ•´æ•°ï¼Œå› æ­¤åº”å½“å±è”½ç¬¦å·ä½ä¹‹åå†ä½¿ç”¨é™¤ç•™ä½™æ•°æ³•ã€‚

```java
int hash = (x.hashCode() & 0x7fffffff) % M;
```

ä½¿ç”¨ Java çš„ HashMap ç­‰è‡ªå¸¦çš„å“ˆå¸Œè¡¨å®ç°æ—¶ï¼Œåªéœ€è¦å»å®ç° Key ç±»å‹çš„ hashCode() å‡½æ•°å³å¯ã€‚Java è§„å®š hashCode() èƒ½å¤Ÿå°†é”®å‡åŒ€åˆ†å¸ƒäºæ‰€æœ‰çš„ 32 ä½æ•´æ•°ï¼ŒJava ä¸­çš„ Stringã€Integer ç­‰å¯¹è±¡çš„ hashCode() éƒ½èƒ½å®ç°è¿™ä¸€ç‚¹ã€‚ä»¥ä¸‹å±•ç¤ºäº†è‡ªå®šä¹‰ç±»å‹å¦‚ä½•å®ç° hashCode()ï¼š

```java
public class Transaction {

    private final String who;
    private final Date when;
    private final double amount;

    public Transaction(String who, Date when, double amount) {
        this.who = who;
        this.when = when;
        this.amount = amount;
    }

    public int hashCode() {
        int hash = 17;
        int R = 31;
        hash = R * hash + who.hashCode();
        hash = R * hash + when.hashCode();
        hash = R * hash + ((Double) amount).hashCode();
        return hash;
    }
}
```

## 2. æ‹‰é“¾æ³•

æ‹‰é“¾æ³•ä½¿ç”¨é“¾è¡¨æ¥å­˜å‚¨ hash å€¼ç›¸åŒçš„é”®ï¼Œä»è€Œè§£å†³å†²çªã€‚

æŸ¥æ‰¾éœ€è¦åˆ†ä¸¤æ­¥ï¼Œé¦–å…ˆæŸ¥æ‰¾ Key æ‰€åœ¨çš„é“¾è¡¨ï¼Œç„¶ååœ¨é“¾è¡¨ä¸­é¡ºåºæŸ¥æ‰¾ã€‚

å¯¹äº N ä¸ªé”®ï¼ŒM æ¡é“¾è¡¨ (N>M)ï¼Œå¦‚æœå“ˆå¸Œå‡½æ•°èƒ½å¤Ÿæ»¡è¶³å‡åŒ€æ€§çš„æ¡ä»¶ï¼Œæ¯æ¡é“¾è¡¨çš„å¤§å°è¶‹å‘äº N/Mï¼Œå› æ­¤æœªå‘½ä¸­çš„æŸ¥æ‰¾å’Œæ’å…¥æ“ä½œæ‰€éœ€è¦çš„æ¯”è¾ƒæ¬¡æ•°ä¸º \~N/Mã€‚

<div align="center"> <img src="https://gitee.com/CyC2018/CS-Notes/raw/master/docs/pics/9_200.png"/> </div><br>

## 3. çº¿æ€§æ¢æµ‹æ³•

çº¿æ€§æ¢æµ‹æ³•ä½¿ç”¨ç©ºä½æ¥è§£å†³å†²çªï¼Œå½“å†²çªå‘ç”Ÿæ—¶ï¼Œå‘å‰æ¢æµ‹ä¸€ä¸ªç©ºä½æ¥å­˜å‚¨å†²çªçš„é”®ã€‚

ä½¿ç”¨çº¿æ€§æ¢æµ‹æ³•ï¼Œæ•°ç»„çš„å¤§å° M åº”å½“å¤§äºé”®çš„ä¸ªæ•° Nï¼ˆM>N)ã€‚

<div align="center"> <img src="https://gitee.com/CyC2018/CS-Notes/raw/master/docs/pics/121550407878282.gif"/> </div><br>

```java
public class LinearProbingHashST<Key, Value> implements UnorderedST<Key, Value> {

    private int N = 0;
    private int M = 16;
    private Key[] keys;
    private Value[] values;

    public LinearProbingHashST() {
        init();
    }

    public LinearProbingHashST(int M) {
        this.M = M;
        init();
    }

    private void init() {
        keys = (Key[]) new Object[M];
        values = (Value[]) new Object[M];
    }

    private int hash(Key key) {
        return (key.hashCode() & 0x7fffffff) % M;
    }
}
```

#### 3.1 æŸ¥æ‰¾

```java
public Value get(Key key) {
    for (int i = hash(key); keys[i] != null; i = (i + 1) % M)
        if (keys[i].equals(key))
            return values[i];

    return null;
}
```

#### 3.2 æ’å…¥

```java
public void put(Key key, Value value) {
    resize();
    putInternal(key, value);
}

private void putInternal(Key key, Value value) {
    int i;
    for (i = hash(key); keys[i] != null; i = (i + 1) % M)
        if (keys[i].equals(key)) {
            values[i] = value;
            return;
        }

    keys[i] = key;
    values[i] = value;
    N++;
}
```

#### 3.3 åˆ é™¤

åˆ é™¤æ“ä½œåº”å½“å°†å³ä¾§æ‰€æœ‰ç›¸é‚»çš„é”®å€¼å¯¹é‡æ–°æ’å…¥æ•£åˆ—è¡¨ä¸­ã€‚

```java
public void delete(Key key) {
    int i = hash(key);
    while (keys[i] != null && !key.equals(keys[i]))
        i = (i + 1) % M;

    // ä¸å­˜åœ¨ï¼Œç›´æ¥è¿”å›
    if (keys[i] == null)
        return;

    keys[i] = null;
    values[i] = null;

    // å°†ä¹‹åç›¸è¿çš„é”®å€¼å¯¹é‡æ–°æ’å…¥
    i = (i + 1) % M;
    while (keys[i] != null) {
        Key keyToRedo = keys[i];
        Value valToRedo = values[i];
        keys[i] = null;
        values[i] = null;
        N--;
        putInternal(keyToRedo, valToRedo);
        i = (i + 1) % M;
    }
    N--;
    resize();
}
```

#### 3.5 è°ƒæ•´æ•°ç»„å¤§å°

çº¿æ€§æ¢æµ‹æ³•çš„æˆæœ¬å–å†³äºè¿ç»­æ¡ç›®çš„é•¿åº¦ï¼Œè¿ç»­æ¡ç›®ä¹Ÿå«èšç°‡ã€‚å½“èšç°‡å¾ˆé•¿æ—¶ï¼Œåœ¨æŸ¥æ‰¾å’Œæ’å…¥æ—¶ä¹Ÿéœ€è¦è¿›è¡Œå¾ˆå¤šæ¬¡æ¢æµ‹ã€‚ä¾‹å¦‚ä¸‹å›¾ä¸­ 2\~5 ä½ç½®å°±æ˜¯ä¸€ä¸ªèšç°‡ã€‚

<div align="center"> <img src="https://gitee.com/CyC2018/CS-Notes/raw/master/docs/pics/11_200.png"/> </div><br>

Î± = N/Mï¼ŒæŠŠ Î± ç§°ä¸ºä½¿ç”¨ç‡ã€‚ç†è®ºè¯æ˜ï¼Œå½“ Î± å°äº 1/2 æ—¶æ¢æµ‹çš„é¢„è®¡æ¬¡æ•°åªåœ¨ 1.5 åˆ° 2.5 ä¹‹é—´ã€‚ä¸ºäº†ä¿è¯æ•£åˆ—è¡¨çš„æ€§èƒ½ï¼Œåº”å½“è°ƒæ•´æ•°ç»„çš„å¤§å°ï¼Œä½¿å¾— Î± åœ¨ [1/4, 1/2] ä¹‹é—´ã€‚

```java
private void resize() {
    if (N >= M / 2)
        resize(2 * M);
    else if (N <= M / 8)
        resize(M / 2);
}

private void resize(int cap) {
    LinearProbingHashST<Key, Value> t = new LinearProbingHashST<Key, Value>(cap);
    for (int i = 0; i < M; i++)
        if (keys[i] != null)
            t.putInternal(keys[i], values[i]);

    keys = t.keys;
    values = t.values;
    M = t.M;
}
```

# å°ç»“

## 1. ç¬¦å·è¡¨ç®—æ³•æ¯”è¾ƒ

| ç®—æ³• | æ’å…¥ | æŸ¥æ‰¾ | æ˜¯å¦æœ‰åº |
| :---: | :---: | :---: | :---: |
| é“¾è¡¨å®ç°çš„æ— åºç¬¦å·è¡¨ | N | N | yes |
| äºŒåˆ†æŸ¥æ‰¾å®ç°çš„æœ‰åºç¬¦å·è¡¨ | N | logN | yes |
| äºŒå‰æŸ¥æ‰¾æ ‘ | logN | logN | yes |
| 2-3 æŸ¥æ‰¾æ ‘ | logN | logN | yes |
| æ‹‰é“¾æ³•å®ç°çš„æ•£åˆ—è¡¨ | N/M | N/M | no |
| çº¿æ€§æ¢æµ‹æ³•å®ç°çš„æ•£åˆ—è¡¨ | 1 | 1 | no |

åº”å½“ä¼˜å…ˆè€ƒè™‘æ•£åˆ—è¡¨ï¼Œå½“éœ€è¦æœ‰åºæ€§æ“ä½œæ—¶ä½¿ç”¨çº¢é»‘æ ‘ã€‚

## 2. Java çš„ç¬¦å·è¡¨å®ç°

- java.util.TreeMapï¼šçº¢é»‘æ ‘
- java.util.HashMapï¼šæ‹‰é“¾æ³•çš„æ•£åˆ—è¡¨

## 3. ç¨€ç–å‘é‡ä¹˜æ³•

å½“å‘é‡ä¸ºç¨€ç–å‘é‡æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ç¬¦å·è¡¨æ¥å­˜å‚¨å‘é‡ä¸­çš„é 0 ç´¢å¼•å’Œå€¼ï¼Œä½¿å¾—ä¹˜æ³•è¿ç®—åªéœ€è¦å¯¹é‚£äº›é 0 å…ƒç´ è¿›è¡Œå³å¯ã€‚

```java
public class SparseVector {
    private HashMap<Integer, Double> hashMap;

    public SparseVector(double[] vector) {
        hashMap = new HashMap<>();
        for (int i = 0; i < vector.length; i++)
            if (vector[i] != 0)
                hashMap.put(i, vector[i]);
    }

    public double get(int i) {
        return hashMap.getOrDefault(i, 0.0);
    }

    public double dot(SparseVector other) {
        double sum = 0;
        for (int i : hashMap.keySet())
            sum += this.get(i) * other.get(i);
        return sum;
    }
}
```




</br><div align="center">â­ï¸æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å· CyC2018ï¼Œåœ¨å…¬ä¼—å·åå°å›å¤å…³é”®å­— ğŸ“š **èµ„æ–™** å¯é¢†å–å¤ä¹ å¤§çº²ï¼Œè¿™ä»½å¤§çº²æ˜¯æˆ‘èŠ±äº†ä¸€æ•´å¹´æ—¶é—´æ•´ç†çš„é¢è¯•çŸ¥è¯†ç‚¹åˆ—è¡¨ï¼Œä¸ä»…ç³»ç»Ÿæ•´ç†äº†é¢è¯•çŸ¥è¯†ç‚¹ï¼Œè€Œä¸”æ ‡æ³¨äº†å„ä¸ªçŸ¥è¯†ç‚¹çš„é‡è¦ç¨‹åº¦ï¼Œä»è€Œå¸®ä½ ç†æ¸…å¤šè€Œæ‚çš„é¢è¯•çŸ¥è¯†ç‚¹ã€‚å¯ä»¥è¯´æˆ‘åŸºæœ¬æ˜¯æŒ‰ç…§è¿™ä»½å¤§çº²æ¥è¿›è¡Œå¤ä¹ çš„ï¼Œè¿™ä»½å¤§çº²å¯¹æˆ‘æ‹¿åˆ°äº† BAT å¤´æ¡ç­‰ Offer èµ·åˆ°å¾ˆå¤§çš„å¸®åŠ©ã€‚ä½ ä»¬å®Œå…¨å¯ä»¥å’Œæˆ‘ä¸€æ ·æ ¹æ®å¤§çº²ä¸Šåˆ—çš„çŸ¥è¯†ç‚¹æ¥è¿›è¡Œå¤ä¹ ï¼Œå°±ä¸ç”¨çœ‹å¾ˆå¤šä¸é‡è¦çš„å†…å®¹ï¼Œä¹Ÿå¯ä»¥çŸ¥é“å“ªäº›å†…å®¹å¾ˆé‡è¦ä»è€Œå¤šå®‰æ’ä¸€äº›å¤ä¹ æ—¶é—´ã€‚</div></br>
<div align="center"><img width="180px" src="https://cyc-1256109796.cos.ap-guangzhou.myqcloud.com/%E5%85%AC%E4%BC%97%E5%8F%B7.jpg"></img></div>
